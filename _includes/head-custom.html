<!-- Add these scripts to your head -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>

<!-- TikZJax for TikZ rendering -->
<link rel="stylesheet" type="text/css" href="https://tikzjax.pages.dev/fonts.css">
<script src="https://tikzjax.pages.dev/tikzjax.js"></script>

<!-- TensorFlow.js -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.21.0/dist/tf.min.js"></script>

<!-- Custom styles for math and interactive components -->
<style>
  .math-block {
    overflow-x: auto;
    margin: 1rem 0;
    padding: 1rem;
    background-color: #f8f9fa;
    border-radius: 0.5rem;
    position: relative;
  }
  .copy-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    padding: 0.25rem 0.5rem;
    background-color: #e2e8f0;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    cursor: pointer;
  }
  .tf-container {
    margin: 2rem 0;
    padding: 1rem;
    border: 1px solid #e2e8f0;
    border-radius: 0.5rem;
  }
  .tikz-container {
    display: flex;
    justify-content: center;
    margin: 1.5rem 0;
  }
</style>

<!-- Initialize KaTeX rendering -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
      delimiters: [
        {left: '$$', right: '$$', display: true},
        {left: '$', right: '$', display: false}
      ],
      throwOnError: false
    });
    
    // Initialize copy buttons for math
    document.querySelectorAll('.math-copy-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const container = this.closest('.math-container');
        const code = container.querySelector('.math-source').textContent;
        navigator.clipboard.writeText(code).then(() => {
          this.textContent = 'Copied!';
          setTimeout(() => {
            this.textContent = 'Copy LaTeX';
          }, 2000);
        });
      });
    });
  });
</script>

<script>
function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
  localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
}

// Check for user preference
if (localStorage.getItem('darkMode') === 'true') {
  document.body.classList.add('dark-mode');
}
</script>