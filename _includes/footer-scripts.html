<!-- Initialize KaTeX rendering -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (typeof renderMathInElement === 'function') {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false}
                ],
                throwOnError: false
            });
        }
    });

    // Function for LaTeX copying
    window.copyLaTeX = function (sourceId) {
        const sourceElement = document.getElementById(sourceId);
        const latexCode = sourceElement.textContent;

        navigator.clipboard.writeText(latexCode).then(
            function () {
                const btn = document.querySelector(`button[onclick="copyLaTeX('${sourceId}')"]`);
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(function () {
                    btn.textContent = originalText;
                }, 2000);
            }
        );
    };
</script>